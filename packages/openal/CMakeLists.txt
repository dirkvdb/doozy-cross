SET(NAME openal-soft)

IF (CMAKE_SYSTEM_NAME MATCHES "Darwin")
    # make sure the coreaudio framework outside of our sysroot is found
    SET (EXTRA_OPTS -DALSOFT_REQUIRE_COREAUDIO=ON -DCOREAUDIO_FRAMEWORK=/System/Library/Frameworks/CoreAudio.framework)
ENDIF ()

EXTERNALPROJECT_ADD(${NAME}
    URL http://repo.or.cz/w/openal-soft.git/snapshot/HEAD.tar.gz TIMEOUT 30
    INSTALL_DIR ${CMAKE_BINARY_DIR}/local
    CMAKE_COMMAND cmake ${EXTRA_OPTS} -DALSOFT_DLOPEN=OFF -DALSOFT_MIDI_FLUIDSYNTH=OFF -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_TOOLCHAIN_FILE=${CMAKE_TOOLCHAIN_FILE}
    INSTALL_COMMAND make DESTDIR=<INSTALL_DIR> install
)
